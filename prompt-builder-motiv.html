<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конструктор промптов для плана урока</title>
    <!-- Подключение файла стилей -->
    <link rel="stylesheet" href="prompt-builder-styles.css">
    <style>
        /* Основные стили */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background-color: #1e2c60;
            color: white;
            padding: 40px 0;
            margin-bottom: 30px;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .school-logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            display: block;
        }

        /* Стили для сетки */
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .full-width {
            grid-column: 1 / -1;
        }

        /* Стили для формы */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        select, input, textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #e0e2ee;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
        }

        select:focus, input:focus, textarea:focus {
            border-color: #365ddf;
            outline: none;
            box-shadow: 0 0 0 2px rgba(54, 93, 223, 0.2);
        }

        select[multiple] {
            height: auto;
            min-height: 120px;
        }

        .hint {
            font-size: 12px;
            color: #666666;
            margin-top: 4px;
        }

        /* Стили для предупреждений */
        .alert {
            color: #d9534f;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 8px 12px;
            border-radius: 4px;
            margin-top: 8px;
            display: none;
        }

        /* Стили для структуры урока */
        .two-columns {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .structure-preview {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }

        .structure-preview ol {
            margin: 0;
            padding-left: 20px;
        }

        /* Стили для чекбоксов */
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }

        /* Стили для результата */
        .result {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 30px;
        }

        .prompt-output {
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #e0e2ee;
            border-radius: 4px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
            min-height: 100px;
            overflow-x: auto;
        }

        #copyButton {
            background-color: #365ddf;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
            width: 100%;
            max-width: 300px;
            margin-top: 10px;
        }

        #copyButton:hover {
            background-color: #2848b8;
        }

        /* Стили для отключенных опций */
        .disabled-option {
            color: #999;
            background-color: #f8f9fa;
        }

        /* Стили для подвала */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #e0e2ee;
        }

        /* Стили для загрузчика и ошибок */
        .loading-indicator {
            color: #666;
            font-style: italic;
            margin: 5px 0;
            display: none;
        }

        .error-message {
            color: #d9534f;
            font-size: 12px;
            margin: 5px 0;
            display: none;
        }

        /* Стили для пользовательских полей */
        [id^="custom"][id$="Container"] {
            display: none;
            margin-top: 10px;
        }

        /* Адаптивные стили */
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
                max-width: 100%;
            }

            .two-columns {
                grid-template-columns: 1fr;
            }

            .header {
                padding: 20px 0;
            }

            .school-logo {
                font-size: 20px;
            }
            
            .container {
                padding: 15px;
            }
            
            .section {
                padding: 15px;
            }
            
            h1 {
                font-size: 24px;
                line-height: 1.3;
            }
            
            h2 {
                font-size: 20px;
            }
            
            select, input, textarea {
                font-size: 16px; /* Предотвращает масштабирование на iOS */
                padding: 10px;
            }
            
            .prompt-output {
                font-size: 14px;
            }
        }
        
        /* Специальные стили для планшетов */
        @media (min-width: 481px) and (max-width: 1024px) {
            .grid {
                gap: 15px;
                margin-bottom: 25px;
            }
            
            .section {
                padding: 18px;
            }
            
            select[multiple] {
                min-height: 140px;
            }
            
            .structure-preview {
                font-size: 15px;
            }
            
            #copyButton {
                max-width: 350px;
                padding: 12px 25px;
                font-size: 16px;
            }
            
            .header-content h1 {
                font-size: 28px;
            }
            
            .header-content p {
                font-size: 16px;
                max-width: 90%;
                margin-left: auto;
                margin-right: auto;
            }
            
            /* Улучшение тактильного взаимодействия на планшетах */
            select, input, button, .checkbox-group label {
                cursor: pointer;
            }
            
            /* Увеличение области нажатия для чекбоксов */
            .checkbox-group {
                padding: 5px 0;
            }
            
            .checkbox-group label {
                padding: 5px 0;
            }
        }
        
        /* Дополнительные стили для очень маленьких экранов */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            h1 {
                font-size: 22px;
            }
            
            h2 {
                font-size: 18px;
            }
            
            .header-content p {
                font-size: 14px;
            }
            
            .form-group {
                margin-bottom: 15px;
            }
            
            label {
                font-size: 15px;
            }
            
            .hint {
                font-size: 11px;
            }
            
            #copyButton {
                width: 100%;
                max-width: none;
            }
        }

        /* Дополнительные стили для выпадающего списка тем */
        .topic-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #e0e2ee;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 8px;
            background-color: white;
        }
        
        .topic-select:focus {
            border-color: #365ddf;
            outline: none;
            box-shadow: 0 0 0 2px rgba(54, 93, 223, 0.2);
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #365ddf;
            text-decoration: none;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        .topics-hint {
            font-size: 12px;
            color: #666666;
            margin-bottom: 8px;
        }
        
        /* Стили для мобильной оптимизации */
        @media (max-width: 480px) {
            .topic-select {
                font-size: 16px;
                padding: 10px;
            }
            
            .topics-hint {
                font-size: 11px;
            }
            
            select[multiple] {
                min-height: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <span class="school-logo">Школа педагогического маркетинга</span>
            <h1>Конструктор мотивационного крючка</h1>
            <p>Инструмент для создания промпта мотивационного крючка для урока с учетом интересов и особенностей ученика</p>
        </div>
    </div>
    
    <div class="container">
        <a href="index.html" class="back-link" style="display: inline-block; margin-bottom: 20px; color: #365ddf; text-decoration: none;">← Вернуться на главную</a>
        <h1>Мотивационный крючок для урока</h1>
        <form id="motivPromptForm">
        <div class="grid">
                <div class="section full-width">
                <div class="form-group">
                        <label for="lessonTopic">Тема урока</label>
                        <input type="text" id="lessonTopic" placeholder="Например: Умножение дробей" required>
                    </div>
                <div class="form-group">
                        <label for="ageClass">Возраст/класс учеников</label>
                        <select id="ageClass" disabled>
                            <option value="">Сначала выберите предмет</option>
                            <optgroup label="Дошкольное образование">
                                <option value="3-4 года" data-grade="0">3-4 года</option>
                                <option value="4-5 лет" data-grade="0">4-5 лет</option>
                                <option value="5-6 лет" data-grade="0">5-6 лет</option>
                                <option value="6-7 лет" data-grade="0">6-7 лет</option>
                            </optgroup>
                            <optgroup label="Начальная школа">
                                <option value="1 класс" data-grade="1">1 класс</option>
                                <option value="2 класс" data-grade="2">2 класс</option>
                                <option value="3 класс" data-grade="3">3 класс</option>
                                <option value="4 класс" data-grade="4">4 класс</option>
                            </optgroup>
                            <optgroup label="Средняя школа">
                                <option value="5 класс" data-grade="5">5 класс</option>
                                <option value="6 класс" data-grade="6">6 класс</option>
                                <option value="7 класс" data-grade="7">7 класс</option>
                                <option value="8 класс" data-grade="8">8 класс</option>
                                <option value="9 класс" data-grade="9">9 класс</option>
                            </optgroup>
                            <optgroup label="Старшая школа">
                                <option value="10 класс" data-grade="10">10 класс</option>
                                <option value="11 класс" data-grade="11">11 класс</option>
                            </optgroup>
                            <optgroup label="Среднее профессиональное образование">
                                <option value="студенты колледжа 1 курс" data-grade="12">1 курс колледжа</option>
                                <option value="студенты колледжа 2 курс" data-grade="13">2 курс колледжа</option>
                                <option value="студенты колледжа 3 курс" data-grade="14">3 курс колледжа</option>
                                <option value="студенты колледжа 4 курс" data-grade="15">4 курс колледжа</option>
                            </optgroup>
                            <optgroup label="Высшее образование">
                                <option value="студенты бакалавриата 1 курс" data-grade="12">1 курс бакалавриата</option>
                                <option value="студенты бакалавриата 2 курс" data-grade="13">2 курс бакалавриата</option>
                                <option value="студенты бакалавриата 3 курс" data-grade="14">3 курс бакалавриата</option>
                                <option value="студенты бакалавриата 4 курс" data-grade="15">4 курс бакалавриата</option>
                                <option value="студенты магистратуры" data-grade="16">Магистратура</option>
                                <option value="студенты аспирантуры" data-grade="17">Аспирантура</option>
                            </optgroup>
                            <option value="Другое" data-grade="-1">Другое (указать)</option>
                        </select>
                        <div id="customAgeClassContainer" style="display: none;" class="form-group">
                            <input type="text" id="customAgeClass" placeholder="Укажите возраст/класс">
                        </div>
                        <div id="classAlert" class="alert">Выбранный класс не соответствует предмету. Пожалуйста, выберите другой класс.</div>
                    </div>
                <div class="form-group">
                        <label for="studentInterests">Интересы ученика</label>
                        <input type="text" id="studentInterests" placeholder="Например: футбол, комиксы, игры" required>
                    </div>
                <div class="form-group">
                        <label for="perceptionType">Тип восприятия</label>
                        <select id="perceptionType" required>
                            <option value="">Выберите тип</option>
                            <option value="визуал">Визуал</option>
                            <option value="аудиал">Аудиал</option>
                            <option value="кинестетик">Кинестетик</option>
                            <option value="смешанный">Смешанный</option>
                    </select>
                    </div>
                <div class="form-group">
                        <label for="lessonDuration">Длительность (минут)</label>
                        <select id="lessonDuration" required>
                            <option value="">Выберите</option>
                                <option value="30">30</option>
                                <option value="40">40</option>
                            <option value="45">45</option>
                                <option value="60">60</option>
                                <option value="90">90</option>
                            </select>
                    </div>
                    <div class="form-group">
                        <label for="knowledgeLevel">Уровень знаний</label>
                        <select id="knowledgeLevel">
                            <option value="">Выберите вариант</option>
                            <option value="начальный">Начальный</option>
                            <option value="базовый">Базовый</option>
                            <option value="средний">Средний</option>
                            <option value="выше среднего">Выше среднего</option>
                            <option value="продвинутый">Продвинутый</option>
                            <option value="углубленный">Углубленный</option>
                            <option value="олимпиадный">Олимпиадный</option>
                            <option value="разный (смешанная группа)">Разный (смешанная группа)</option>
                            <option value="Другое">Другое (указать)</option>
                        </select>
                        <div id="customKnowledgeLevelContainer" style="display: none;" class="form-group">
                            <input type="text" id="customKnowledgeLevel" placeholder="Укажите уровень знаний">
                        </div>
                    </div>
                    <button type="submit" id="generateBtn" style="width:100%;margin-top:10px;background:#365ddf;color:white;border:none;padding:12px 0;border-radius:4px;font-size:16px;cursor:pointer;">Сгенерировать промпт</button>
            </div>
        </div>
        </form>
        <div class="result">
            <h2>Готовый промпт:</h2>
            <div id="generatedPrompt" class="prompt-output">Заполните форму, чтобы сгенерировать промпт</div>
            <button id="copyButton">Скопировать промпт</button>
        </div>
    </div>
    
    <div class="footer">
        <p>© 2025 Школа педагогического маркетинга | Курс "Нейросети для преподавателей и репетиторов"</p>
        <p><a href="https://promo.teachermentor.ru/neiro_teaher21" style="color: #365ddf; text-decoration: none;">promo.teachermentor.ru/neiro_teaher21</a></p>
    </div>

    <script>
        // Генерация промпта по шаблону
        document.getElementById('motivPromptForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const topic = document.getElementById('lessonTopic').value.trim();
            const age = document.getElementById('ageClass').value.trim();
            const subject = document.getElementById('expertType').value.trim();
            const interests = document.getElementById('studentInterests').value.trim();
            const perception = document.getElementById('perceptionType').value;
            const duration = document.getElementById('lessonDuration').value;
            const level = document.getElementById('knowledgeLevel').value;
            
            if (!topic || !age || !subject || !interests || !perception || !duration || !level) {
                document.getElementById('generatedPrompt').textContent = 'Пожалуйста, заполните все поля.';
                return;
            }
            
            const prompt = `Ты - эксперт по мотивации учеников и геймификации обучения.\n\nСоздай мотивационный крючок для урока по теме "${topic}" для ученика ${age} лет по предмету ${subject}.\n\nДополнительная информация:\n- Интересы ученика: ${interests}\n- Тип восприятия: ${perception}\n- Длительность: ${duration}\n- Уровень: ${level}\n\nЗАДАЧА: Создать 3 варианта мотивационных крючков, которые:\n1. Зацепят внимание в первые 30 секунд\n2. Свяжут тему с интересами ученика\n3. Покажут практическую пользу\n4. Создадут интригу или вызов\n\nДля каждого варианта предоставь:\n- Название крючка\n- Сценарий введения (что говорить/показывать)\n- Связь с темой урока\n- Практическое применение\n- Элемент игры/соревнования (если подходит)`;
            document.getElementById('generatedPrompt').textContent = prompt;
        });

        // Копирование результата
        document.getElementById('copyButton').addEventListener('click', async function() {
                    const promptOutput = document.getElementById('generatedPrompt');
                    if (promptOutput) {
                        try {
                            await navigator.clipboard.writeText(promptOutput.textContent);
                    this.textContent = 'Скопировано!';
                            setTimeout(() => {
                        this.textContent = 'Скопировать промпт';
                            }, 2000);
                        } catch (error) {
                    alert('Не удалось скопировать текст. Попробуйте выделить и скопировать вручную.');
                        }
                    }
                });

        // === Логика фильтрации классов и кастомных полей ===
        function updateAvailableClasses() {
            const expertType = document.getElementById('expertType');
            const ageClass = document.getElementById('ageClass');
            const subjectAlert = document.getElementById('subjectAlert');
            const classAlert = document.getElementById('classAlert');
            if (!expertType.value) {
                ageClass.disabled = true;
                ageClass.options[0].text = 'Сначала выберите предмет';
                if (subjectAlert) subjectAlert.style.display = 'block';
                return;
            }
            const selectedOption = expertType.options[expertType.selectedIndex];
            const grades = selectedOption.dataset.grades;
            if (!grades) {
                ageClass.disabled = true;
                return;
            }
            ageClass.disabled = false;
            ageClass.options[0].text = 'Выберите класс';
            if (subjectAlert) subjectAlert.style.display = 'none';
            const availableGrades = grades.split(',').map(g => g.trim());
            let hasAvailableOptions = false;
            Array.from(ageClass.options).forEach(option => {
                const grade = option.dataset.grade;
                if (grade) {
                    const isAvailable = availableGrades.includes(grade);
                    option.disabled = !isAvailable;
                    option.style.display = isAvailable ? '' : 'none';
                    if (isAvailable) hasAvailableOptions = true;
                }
            });
            if (!hasAvailableOptions) {
                ageClass.disabled = true;
            }
            // Сбросить выбор, если выбранный класс не подходит
            if (ageClass.value && ageClass.value !== 'Другое') {
                const selectedGrade = ageClass.options[ageClass.selectedIndex]?.dataset.grade;
                if (selectedGrade && !availableGrades.includes(selectedGrade)) {
                    ageClass.value = '';
                    if (classAlert) classAlert.style.display = 'block';
                } else {
                    if (classAlert) classAlert.style.display = 'none';
                }
            }
        }
        function toggleCustomField(selectElement, customContainer) {
            if (selectElement && customContainer) {
                customContainer.style.display = selectElement.value === 'Другое' ? 'block' : 'none';
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            const expertType = document.getElementById('expertType');
            const customExpertContainer = document.getElementById('customExpertContainer');
            const ageClass = document.getElementById('ageClass');
            const customAgeClassContainer = document.getElementById('customAgeClassContainer');
            const knowledgeLevel = document.getElementById('knowledgeLevel');
            const customKnowledgeLevelContainer = document.getElementById('customKnowledgeLevelContainer');
            if (expertType) {
                expertType.addEventListener('change', function() {
                    toggleCustomField(expertType, customExpertContainer);
                    updateAvailableClasses();
                });
            }
            if (ageClass) {
                ageClass.addEventListener('change', function() {
                    toggleCustomField(ageClass, customAgeClassContainer);
                    const classAlert = document.getElementById('classAlert');
                    if (classAlert) classAlert.style.display = 'none';
                });
            }
            if (knowledgeLevel) {
                knowledgeLevel.addEventListener('change', function() {
                    if (customKnowledgeLevelContainer)
                        customKnowledgeLevelContainer.style.display = knowledgeLevel.value === 'Другое' ? 'block' : 'none';
                });
            }
        });

        // Проверка обязательных полей и показ ошибок
        function validateMotivForm() {
            const expertType = document.getElementById('expertType');
            const customExpertType = document.getElementById('customExpertType');
            const ageClass = document.getElementById('ageClass');
            const customAgeClass = document.getElementById('customAgeClass');
            const lessonTopic = document.getElementById('lessonTopic');
            const knowledgeLevel = document.getElementById('knowledgeLevel');
            const customKnowledgeLevel = document.getElementById('customKnowledgeLevel');
            const errorBlock = document.getElementById('motivFormError');

            let subjectValue = expertType.value;
            if (subjectValue === 'Другое' && customExpertType.value.trim()) {
                subjectValue = customExpertType.value.trim();
            }
            let classValue = ageClass.value;
            if (classValue === 'Другое' && customAgeClass.value.trim()) {
                classValue = customAgeClass.value.trim();
            }
            let levelValue = knowledgeLevel.value;
            if (levelValue === 'Другое' && customKnowledgeLevel.value.trim()) {
                levelValue = customKnowledgeLevel.value.trim();
            }
            const topicValue = lessonTopic.value.trim();

            if (!subjectValue || !classValue || !topicValue || !levelValue) {
                if (errorBlock) {
                    errorBlock.style.display = 'block';
                    errorBlock.textContent = 'Пожалуйста, заполните все обязательные поля: предмет, класс, тему и уровень знаний.';
                }
                return false;
            }
            if (errorBlock) errorBlock.style.display = 'none';
            return true;
        }
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('motivPromptForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    if (!validateMotivForm()) {
                        e.preventDefault();
                        return false;
                    }
                });
            }
        });
    </script>
</body>
</html>